version: "3"
networks:
  default:
    driver: bridge
services:
  #---------------------------------------------------------#
  # SERVICE: Production
  #---------------------------------------------------------#
  prod-service:
    image: whales-prod:build
    build:
      context: ".."
      dockerfile: "${WHALES_SETUP_PATH}/Dockerfile"
      args:
        WD: "$WD"
        WHALES_PROJECT_NAME: "$WHALES_PROJECT_NAME"
        WHALES_SELECTED_SERVICE: "$WHALES_SELECTED_SERVICE"
        WHALES_SETUP_PATH: "$WHALES_SETUP_PATH"
        ENTRY_SCRIPT: "$ENTRY_SCRIPT"
    volumes:
      # - ./../logs:$WD/logs:rw   ## <- (r/)w for logging between all docker levels.
      - ./../src:$WD/src:rw     ## <- r/w   allows for live developing
      - ./../test:$WD/test:rw   ##          ""
    command:
      [ "/bin/bash", "-c", "echo -e \"Service \\033[1mtest-service\\033[0m built with image \\033[1mpolarwhales-test:build\\033[0m.\"" ]
